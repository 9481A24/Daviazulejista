<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Site com Formulário Administrativo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    /* --- FORMULÁRIO ADMIN OCULTO --- */
    #adm-form {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      color: #fff;
      padding: 20px;
      box-sizing: border-box;
      overflow-y: auto;
      z-index: 9999;
    }

    #adm-form h2 {
      text-align: center;
      margin-bottom: 15px;
    }

    .adm-field {
      margin: 10px 0;
    }

    .adm-field label {
      display: block;
      margin-bottom: 5px;
    }

    .adm-field input {
      width: 100%;
      padding: 8px;
      box-sizing: border-box;
    }

    .buttons {
      margin-top: 15px;
      display: flex;
      gap: 10px;
    }

    button {
      padding: 10px 15px;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }

    button:hover {
      opacity: 0.9;
    }

    .save-btn { background: #28a745; color: #fff; }
    .reset-btn { background: #dc3545; color: #fff; }
    .print-btn { background: #007bff; color: #fff; }

    /* Relógio */
    #relogio {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: #2ecc71;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: bold;
      margin: 20px auto;
    }

    /* Histórico */
    #historico {
      margin-top: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    table, th, td {
      border: 1px solid #ccc;
      color: #fff;
    }

    th, td {
      padding: 8px;
      text-align: left;
    }

    th {
      background: #444;
    }

    /* Comprovante */
    #comprovante {
      display: none;
    }
  </style>
</head>
<body>
  <!-- FOTO DO TEMPLATE -->
  <section id="hero">
    <img src="sua-foto.jpg" alt="Template" class="menu-foto" style="width:100%; max-height:300px; object-fit:cover;">
  </section>

  <!-- FORMULÁRIO ADMINISTRATIVO -->
  <div id="adm-form">
    <h2>Formulário Administrativo</h2>

    <div class="adm-field">
      <label>Nome</label>
      <input type="text" id="nome">
    </div>
    <div class="adm-field">
      <label>Endereço</label>
      <input type="text" id="endereco">
    </div>
    <div class="adm-field">
      <label>Bairro</label>
      <input type="text" id="bairro">
    </div>
    <div class="adm-field">
      <label>Cidade</label>
      <input type="text" id="cidade">
    </div>
    <div class="adm-field">
      <label>Serviço</label>
      <input type="text" id="servico">
    </div>
    <div class="adm-field">
      <label>Valor</label>
      <input type="number" id="valor" step="0.01">
    </div>

    <!-- Relógio -->
    <div id="relogio">0.00</div>

    <!-- Botões -->
    <div class="buttons">
      <button class="save-btn" onclick="salvarEntrada()">Salvar Entrada</button>
      <button class="reset-btn" onclick="zerarEntradas()">Zerar</button>
      <button class="print-btn" onclick="imprimirComprovante()">Imprimir</button>
    </div>

    <!-- Histórico -->
    <div id="historico">
      <h3>Histórico de Entradas</h3>
      <table>
        <thead>
          <tr>
            <th>Data/Hora</th>
            <th>Nome</th>
            <th>Serviço</th>
            <th>Valor</th>
          </tr>
        </thead>
        <tbody id="lista-historico"></tbody>
      </table>
    </div>
  </div>

  <!-- COMPROVANTE (para impressão) -->
  <div id="comprovante"></div>

  <script>
    let total = 0;
    let historico = [];
    let clickCount = 0;
    let clickTimer;

    // Clique na foto 5x para abrir formulário
    document.querySelector('.menu-foto').addEventListener('click', () => {
      clickCount++;
      clearTimeout(clickTimer);
      clickTimer = setTimeout(() => { clickCount = 0; }, 800);
      if (clickCount === 5) {
        document.getElementById('adm-form').style.display = 'block';
        clickCount = 0;
      }
    });

    function salvarEntrada() {
      const nome = document.getElementById('nome').value;
      const endereco = document.getElementById('endereco').value;
      const bairro = document.getElementById('bairro').value;
      const cidade = document.getElementById('cidade').value;
      const servico = document.getElementById('servico').value;
      const valor = parseFloat(document.getElementById('valor').value) || 0;
      const dataHora = new Date().toLocaleString();

      total += valor;
      document.getElementById('relogio').innerText = total.toFixed(2);

      const entrada = { nome, endereco, bairro, cidade, servico, valor, dataHora };
      historico.push(entrada);
      atualizarHistorico();
      gerarComprovante(entrada);

      // limpa campos
      document.getElementById('nome').value = "";
      document.getElementById('endereco').value = "";
      document.getElementById('bairro').value = "";
      document.getElementById('cidade').value = "";
      document.getElementById('servico').value = "";
      document.getElementById('valor').value = "";
    }

    function atualizarHistorico() {
      const tbody = document.getElementById('lista-historico');
      tbody.innerHTML = "";
      historico.forEach(ent => {
        const row = `<tr>
          <td>${ent.dataHora}</td>
          <td>${ent.nome}</td>
          <td>${ent.servico}</td>
          <td>R$ ${ent.valor.toFixed(2)}</td>
        </tr>`;
        tbody.innerHTML += row;
      });
    }

    function zerarEntradas() {
      total = 0;
      historico = [];
      document.getElementById('relogio').innerText = "0.00";
      atualizarHistorico();
    }

    function gerarComprovante(ent) {
      const comp = document.getElementById('comprovante');
      comp.innerHTML = `
        <h2>Comprovante de Serviço</h2>
        <p><b>Data/Hora:</b> ${ent.dataHora}</p>
        <p><b>Nome:</b> ${ent.nome}</p>
        <p><b>Endereço:</b> ${ent.endereco}, ${ent.bairro}, ${ent.cidade}</p>
        <p><b>Serviço:</b> ${ent.servico}</p>
        <p><b>Valor:</b> R$ ${ent.valor.toFixed(2)}</p>
      `;
    }

    function imprimirComprovante() {
      const conteudo = document.getElementById('comprovante').innerHTML;
      const janela = window.open('', '', 'width=600,height=400');
      janela.document.write('<html><head><title>Comprovante</title></head><body>');
      janela.document.write(conteudo);
      janela.document.write('</body></html>');
      janela.document.close();
      janela.print();
    }
  </script>
</body>
</html>
